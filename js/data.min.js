/*! beerdashboard 2016-07-19 */
function drawChart(){var a=new google.visualization.DataTable;a.addColumn("date","Date"),a.addColumn("number","Beers Per Day");for(var b=0,c=0;c<datesArray.length;c++){date=datesArray[c];var d=date.substring(0,4),e=date.substring(5,7),f=date.substring(8,10);console.log(f),b=datesArray[c]==datesArray[c-1]?numberOfBeersArray[c]+numberOfBeersArray[c-1]:numberOfBeersArray[c],a.addRows([[new Date(d,e,f),b]])}var g={title:"Number of Beers Poured Per Day",width:400,height:300,legend:{position:"none"},backgroundColor:{fill:"transparent"},textStyle:{color:"#FFF"},titleTextStyle:{color:"#000"},vAxis:{textStyle:{color:"#FFF"}},hAxis:{textStyle:{color:"#FFF"}}},h=new google.visualization.ColumnChart(document.getElementById("chart_div"));h.draw(a,g)}var total_beers=document.getElementById("total_beers"),ipa=document.getElementById("ipa"),porter=document.getElementById("porter"),datesArray=[],numberOfBeersArray=[],config={apiKey:"AIzaSyDRkKBPzNhp_rMC7WSvF1ZNAuw46e9qN24",authDomain:"tiltsensorarduino.firebaseapp.com",databaseURL:"https://tiltsensorarduino.firebaseio.com",storageBucket:"tiltsensorarduino.appspot.com"};firebase.initializeApp(config);var ref=firebase.database().ref("beers/");ref.on("value",function(a){var b=a.val(),c=0,d=0;for(var e in b){if("Sensor1"==e)for(var f in b[e])for(var g in b[e][f])if("beersPerDay"==g&&(c+=b[e][f][g],numberOfBeersArray.push(c)),"datetime"==g){var h=b[e][f][g];datesArray.push(h)}if("Sensor2"==e)for(var i in b[e])for(var j in b[e][i])if("beersPerDay"==j&&(d+=b[e][i][j],numberOfBeersArray.push(d)),"datetime"==j){var k=b[e][i][j];datesArray.push(k)}}porter.innerHTML=d,ipa.innerHTML=c,total_beers.innerHTML=b.total_beers},function(a){console.log("The read failed: "+a.code),ipa.innerHTML="Calculating",porter.innerHTML="Calculating",total_beers.innerHTML="Calculating"}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(drawChart),setTimeout(drawChart,3e3);